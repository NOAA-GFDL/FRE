.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "HSMGET 1"
.TH HSMGET 1 "2012 August 01" "Bronx" "FRE Utility"
.SH "NAME"
hsmget \- Retrieves files from remote storage
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
hsmget [\s-1OPTIONS\s0] file [file ...]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
As part of the \s-1FRE\s0 Overhaul a three-level storage model was described
that allow data coming from archive to be cached in an area called the
long-term scratch when being copied to fast scratch at runtime.
.PP
*hsmget* and *hsmput* are scripts that achieve this.  These scripts
are loosely based on Tim Yeager's proposal.
.Sh "\s-1WHAT\s0 \s-1HSMGET\s0 \s-1AND\s0 \s-1HSMPUT\s0 \s-1DO\s0"
.IX Subsection "WHAT HSMGET AND HSMPUT DO"
\&\fBhsmget\fR and \fBhsmput\fR assume four levels of storage:
.IP "\-" 2
a remote archive, slow connection, linear media, permanent storage. This is /archive on the \s-1HPCS\s0.
.IP "\-" 2
a local archive, slow connection. This is \s-1LTFS\s0 on the \s-1NCRC\s0.
.IP "\-" 2
a long-term shared scratch, accessible across a cluster of
supercomputing nodes such as the \s-1HPCS\s0. Here we have two filesystems
/ptmp and /work that serve this purpose. On the \s-1NCRC\s0 system \s-1CSCRATCH\s0
plays this role. You could also use /vftmp/$user as a long-term
scratch between jobs on the same node. Data in long-term scratch is
not guaranteed to stay forever: anything requiring permanent storage
must be archived.
.IP "\-" 2
a fast scratch, not guaranteed continuity beyond a single batch
job. This is the \f(CW$TMPDIR\fR created on /vftmp for a qlogin/qsub session.
.PP
On each of these we define root directories, below which the directory
tree is identical for the files being retrieved. That is to say, given
variables called \f(CW$ARCHROOT\fR (e.g \*(L"/archive/$USER\*(R") , \f(CW$PTMPROOT\fR (e.g
\&\*(L"/ptmp/$USER\*(R") and \f(CW$WORKROOT\fR (e.g \*(L"$TMPDIR\*(R"), a request to retrieve
.PP
$WORKROOT/foo/bar will look for a newer file called \f(CW$PTMPROOT\fR/foo/bar,
which in turn will look for a newer file called \f(CW$ARCHROOT\fR/foo/bar.
.PP
The remote file might also be in a tar or cpio container, i.e
\&\f(CW$ARCHROOT\fR/foo.cpio which contains a file called bar. This is done to
reduce the number of individual files in archive.
.PP
Note that transfers are only initiated when the source file is newer:
the underlying code is actually a Makefile.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-a\fR, \fB\-\-archroot\fR \fI<dir>\fR" 8
.IX Item "-a, --archroot <dir>"
Anchor point on remote storage.
.IP "\fB\-p\fR, \fB\-\-ptmproot\fR \fI<dir>\fR" 8
.IX Item "-p, --ptmproot <dir>"
Anchor point on long-term scratch.
.IP "\fB\-w\fR, \fB\-\-workroot\fR \fI<dir>\fR" 8
.IX Item "-w, --workroot <dir>"
Anchor point on local fast scratch.
.IP "\fB\-r\fR, \fB\-\-remotepath\fR" 8
.IX Item "-r, --remotepath"
Remote path for offsite retrieval.
.IP "\fB\-c\fR, \fB\-\-checksum\fR" 8
.IX Item "-c, --checksum"
Run checksums on transfers.
.IP "\fB\-s\fR, \fB\-\-sum\fR \fI<file>\fR" 8
.IX Item "-s, --sum <file>"
External file of prior checksums.
.IP "\fB\-t\fR, \fB\-\-time\fR" 8
.IX Item "-t, --time"
Turn on timers.
.IP "\fB\-f\fR, \fB\-\-force\fR" 8
.IX Item "-f, --force"
Force transfer even if local file up\-to\-date.
.IP "\fB\-e\fR, \fB\-\-extra\fR" 8
.IX Item "-e, --extra"
Extra copy of target file saved in \fIworkroot\fR directory.
.IP "\fB\-n\fR, \fB\-\-nocopy\fR" 8
.IX Item "-n, --nocopy"
Dry run, no actual data transfer.
.IP "\fB\-m\fR, \fB\-\-makefile\fR" 8
.IX Item "-m, --makefile"
Makefile that will be invoked.
.IP "\fB\-q\fR, \fB\-\-quiet\fR" 8
.IX Item "-q, --quiet"
Minimal output.
.IP "\fB\-v\fR, \fB\-\-verbose\fR" 8
.IX Item "-v, --verbose"
Verbose output.
.IP "\fB\-h\fR, \fB\-\-help\fR" 8
.IX Item "-h, --help"
Print the help message, and exit.
.IP "\fIfile\fR" 8
.IX Item "file"
Files are specified by listing the target path relative to workroot.
Container directory may be a tar/cpio archive on remote storage.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fBhsmput\fR(1), \fBmake\fR(1), \fBtar\fR(1), \fBcpio\fR(1)
.SH "BUGS"
.IX Header "BUGS"
Report any bugs to GFDL's Helpdesk <oar.gfdl.help@noaa.gov>

.SH "AUTHOR"
.IX Header "AUTHOR"
Designed and written by V. Balaji, Amy Langenhorst and Aleksey Yakovlev
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright 2008\-2012 Geophysical Fluid Dynamics Laboratory
.PP
The Flexible Modeling System (\s-1FMS\s0) is free software; you can
redistribute it and/or modify it and are expected to follow the terms
of the \s-1GNU\s0 General Public License as published by the Free Software
Foundation; either version 2 of the License, or (at your option) any
later version.
.PP
\&\s-1FMS\s0 is distributed in the hope that it will be useful, but \s-1WITHOUT\s0 \s-1ANY\s0
\&\s-1WARRANTY\s0; without even the implied warranty of \s-1MERCHANTABILITY\s0 or
\&\s-1FITNESS\s0 \s-1FOR\s0 A \s-1PARTICULAR\s0 \s-1PURPOSE\s0. See the \s-1GNU\s0 General Public License
for more details.
